---
title: "Auto-diagnostic des transitions – Synthèse"
output:
  pdf_document:
    latex_engine: xelatex
geometry: margin=2cm
params:
  identite: NULL
  df_details: NULL
  radar_path: NULL
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
id  <- params$identite
res <- params$df_details
radar_path <- params$radar_path
```

```{r echo=FALSE, out.width="100%"}
knitr::include_graphics(radar_path)
```

```{r resultats, echo=FALSE}
if (!is.null(res)) {

  themes <- unique(res$Theme)

  for (th in themes) {

    cat("## ", th, "\n\n")

    d <- res[res$Theme == th, ]

    if (nrow(d) > 0) {
      print(
        knitr::kable(
          d[, c("Objectif", "score_pct")],
          col.names = c("Objectif", "Score (%)"),
          align = c("l", "c")
        )
      )
    } else {
      cat("Aucun objectif pour ce thème.\n\n")
    }
  }

} else {
  cat("**Aucun détail de résultats disponible.**")
}
```
